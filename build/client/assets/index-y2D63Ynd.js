import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as c,L as g,a as P,c as S}from"./components-CqyJs_9b.js";import{A as L}from"./AccountLayout-QOHrx1by.js";import{u as _}from"./AuthContext-BH94oN1s.js";import{f as k,e as $,z as E,b0 as I,a9 as A,L as C,b1 as U}from"./lib-d-OCgvip.js";import{L as M}from"./LoadingMessage-B9wZrrAy.js";import"./LeftNav-Cj9_gra7.js";import"./HomeNav-C5gVOegL.js";import"./MainNav-oY7cNyR2.js";import"./index-CTCnFI3k.js";const B=({listing:t,index:s})=>{const[o,m]=c.useState("/images/bycetplaceholder.png"),[d,p]=c.useState("");function a(i){return i%2!==0}return c.useEffect(()=>{if(t&&(t==null?void 0:t.image_url)!==null){let i=k.IMG_BASE_URL+(t==null?void 0:t.image_url);p(i)}else p(o)},[t]),e.jsx("div",{className:" cursor-pointer my-0",children:e.jsxs("div",{className:`flex rounded  gap-x-2 py-2 px-1
             hover:bg-blue-50  
             ${a(s),""}
                `,children:[e.jsx("div",{className:`relative min-w-[46px] w-[46px] h-[45px]
                    rounded-md overflow-hidden border bg-transparent bg-cover bg-center`,style:{backgroundImage:`url(${o})`},children:e.jsx("img",{src:d,alt:t.title,className:`object-cover w-full h-full text-sm bg-white
                             `})}),e.jsx("div",{className:" w-full",children:e.jsx(g,{to:`/web/account/portfolio/${t.gid}`,children:e.jsxs("div",{className:`md:flex md:place-content-between 
                w-full md:gap-x-[4px]`,children:[e.jsxs("div",{className:"w-full md:w-[60%] -space-y-1 block",children:[e.jsx("div",{className:"font-semibold text-[14px] text-brown-800 line-clamp-1",children:t.title}),e.jsx("div",{className:" text-lg flex place-items-center gap-1",children:e.jsx("div",{className:"capitalize flex place-items-center text-sm ",children:$(t.category)})}),e.jsx("div",{className:`font-normal text-[11px] 
                                    flex place-items-center gap-1 `,children:t!=null&&t.active_status?"Active":"Inactive"})]}),e.jsxs("div",{className:`w-full lg:w-[40%] hidden 
                                sm:block`,children:[e.jsx("div",{className:"flex flex-col place-items-end place-content-end text-black tracking-tighter",children:t.phone}),e.jsxs("div",{className:`flex flex-col text-end text-[12px]
                                leading-[1.2em]`,children:[t==null?void 0:t.address_one,t!=null&&t.address_two?`, ${t==null?void 0:t.address_two}`:"",t!=null&&t.city_name?`, ${t==null?void 0:t.city_name}`:"",t!=null&&t.state_name?`, ${t==null?void 0:t.state_name}`:"",t!=null&&t.country_name?`, ${t==null?void 0:t.country_name}`:""]})]})]})})})]})})},R=({data:t,itemsPerPage:s=3,resetPageKey:o})=>{const[m,d]=P(),p=Number(m.get("page"))||1,[a,i]=c.useState(p),r=Math.ceil(t.length/s),b=a*s,v=b-s,h=t.slice(v,b),x=l=>{i(l);const u=new URLSearchParams(m);u.set("page",String(l)),d(u)},j=()=>{a>1&&x(a-1)},f=()=>{a<r&&x(a+1)};c.useEffect(()=>{o!==void 0&&x(1)},[o]);const N=()=>{if(r<=3)return Array.from({length:r},(n,y)=>y+1).map(n=>e.jsx("button",{onClick:()=>x(n),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${a===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n));const l=[];a>2&&(l.push(e.jsx("button",{onClick:()=>x(1),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${a===1?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:"1"},1)),a>3&&l.push(e.jsx("span",{className:"px-2",children:"…"},"start-ellipsis")));const u=Math.max(1,a-1),w=Math.min(r,a+1);for(let n=u;n<=w;n++)l.push(e.jsx("button",{onClick:()=>x(n),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${a===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n));return a<r-1&&(a<r-2&&l.push(e.jsx("span",{className:"px-2",children:"…"},"end-ellipsis")),l.push(e.jsx("button",{onClick:()=>x(r),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${a===r?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:r},r))),l};return e.jsxs("div",{children:[e.jsx("div",{className:"divide-gray-500/20 divide-y-[1px]",children:h.map((l,u)=>e.jsx("div",{children:e.jsx(B,{index:u+1,listing:l})},u))}),r>1&&e.jsxs("div",{className:"flex justify-center gap-[5px] mt-[20px] text-[13px] border-t pt-6",children:[e.jsx("button",{onClick:j,disabled:a===1,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Previous"}),N(),e.jsx("button",{onClick:f,disabled:a===r,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Next"})]})]})},q=({user:t,portfolio:s})=>e.jsx("div",{className:" h-fit pl-[5px] pr-[10px]",children:(s==null?void 0:s.length)>0?e.jsx(R,{data:s,itemsPerPage:7}):e.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:e.jsx("span",{children:"no record"})})}),z=({query:t})=>e.jsx("form",{action:"/web/account/portfolio",className:"text-sm w-full max-w-md",children:e.jsxs("div",{className:`flex items-center bg-gray-50 rounded-full pl-4 pr-1 py-1 gap-2
            border-[1px] border-gray-500`,children:[e.jsx("input",{name:"q",defaultValue:t,type:"text",placeholder:"Business name, address, country, state...",className:"flex-grow text-gray-700 text-[12px] outline-none bg-transparent"}),e.jsx("button",{className:"bg-gray-600 w-8 h-8 flex items-center justify-center rounded-full text-white text-lg",children:e.jsx(E,{})})]})}),D=({baseUrl:t,noOfPages:s,query:o})=>{const[m,d]=c.useState(0);return c.useEffect(()=>{if(s){const p=Number(s);p>0&&d(p)}},[]),e.jsx("div",{children:e.jsxs("div",{className:`bg-gray-100 w-full  
                            flex place-content-between rounded-lg
                            place-items-center h-auto py-3 gap-[5px]
                            leading-[1.5em] px-[10px]`,children:[e.jsx("div",{className:"h-full min-w-[100px] max-w-[300px]",children:e.jsxs("div",{className:"flex items-center   ",children:[e.jsx(I,{className:"mr-1 flex-shrink-0",size:20}),e.jsxs("span",{className:"line-clamp-1 overflow-hidden text-blue-800 text-[16px] font-sans tracking-tight font-bold ",children:[m," Pages"]})]})}),e.jsx("div",{className:"grow flex place-content-end",children:e.jsx(z,{query:o})})]})})},G=({children:t,businessGuid:s,data:o,businessProfile:m,title:d})=>e.jsx("div",{children:e.jsxs("div",{className:`mt-4 bg-white 
                rounded-lg shadow-md pb-8 `,children:[e.jsxs("div",{className:"font-semibold text-[17px] border-b-[1px] p-3 flex place-content-between place-items-center",children:[e.jsx("div",{children:d}),e.jsx("div",{className:"text-[13px] flex place-items-center gap-2",children:e.jsx("a",{href:"/web/account/portfolio",className:"border py-[5px] px-[10px] rounded-full bg-blue-50",children:"Portfolio Home"})})]}),e.jsxs("div",{className:"  pt-0 ",children:[e.jsx("div",{className:"w-full flex place-content-end"}),t,e.jsx("div",{className:"h-[40px]"})]})]})}),Z=()=>{c.useEffect(()=>{localStorage&&A(localStorage)},[localStorage]);const t=_();if(!t)return null;const{user:s}=t,[o,m]=c.useState(null),[d,p]=c.useState(null),[a,i]=c.useState(null),[r,b]=c.useState(!0),v=S(),h=new URLSearchParams(v.search),x=(h==null?void 0:h.get("q"))||"";return c.useEffect(()=>{async function j(f,N){const l=await C(f||""),u=await U(f||"",N||"");m(l),p(u)}try{s!=null&&s.guid&&j(s==null?void 0:s.guid,x)}catch(f){console.log(f.message)}},[s==null?void 0:s.guid,x]),c.useEffect(()=>{o&&d&&i({userProfile:o,portfolio:d})},[o,d]),c.useEffect(()=>{a!==null&&b(!1)},[a]),r?e.jsx(M,{loading:r}):e.jsx(L,{children:e.jsxs(G,{title:"My Portfolio",children:[o===null?"Loading...":"",e.jsx(D,{baseUrl:"/web/account/portfolio",noOfPages:a.portfolio.length,query:x}),e.jsx("div",{className:"flex place-items-center place-content-center mt-3"}),e.jsx("div",{className:"mt-[20px]"}),a!==null&&e.jsx(q,{user:a.userProfile,portfolio:a.portfolio})]})})};export{Z as default};
