import{j as a}from"./jsx-runtime-0DLF9kdB.js";import{r as u,d as R,a as z,b as U,u as D,e as M}from"./components-QUucBwvO.js";import{au as G,N as A,ap as $,aq as T,ar as H,az as W,aA as K,at as q,as as O,J as Q,P as J,aB as V,L as X}from"./lib-gXVz7xpy.js";import{R as F,T as Y,A as Z,C as L,a as g,F as ee}from"./Categories-nU00yz3b.js";import{P as ae}from"./Placeholder-De5I-oAU.js";import{M as re}from"./MainNav-DJZKCZXI.js";import"./AuthContext-D6RspcLh.js";import"./AccountUserImage-zrnI0bEK.js";import"./index-D4GH3UrM.js";const I=({averageRating:e})=>{const[v,x]=u.useState(0);return u.useEffect(()=>{e!=null&&x(e)},[e]),a.jsxs("div",{className:"text-blue-700",children:["(",G(Number(v)),")"]})},se=({listing:e})=>{var P;const[v,x]=u.useState("/images/bycetplaceholder.png"),[d,o]=u.useState(""),[n,p]=u.useState(""),[l,h]=u.useState(null),[i,b]=u.useState(""),[t,y]=u.useState(null),[j,_]=u.useState(null),[E,k]=u.useState("");return u.useEffect(()=>{if(e){const c=e;y(c),c!=null&&c.image_url?o(A.IMG_BASE_URL+(c==null?void 0:c.image_url)):o(v)}},[e]),u.useEffect(()=>{e!=null&&e.website?b(e==null?void 0:e.website):(e==null?void 0:e.username)===""||(e==null?void 0:e.username)===null?b("/"+(e==null?void 0:e.gid)):b("/"+(e==null?void 0:e.username))},[e]),u.useEffect(()=>{e&&((e==null?void 0:e.image_url)!==""&&(e==null?void 0:e.image_url)!==null&&(e==null?void 0:e.image_url)!==void 0?o(A.IMG_BASE_URL+(e==null?void 0:e.image_url)):o(v),(e==null?void 0:e.username)!==""&&(e==null?void 0:e.username)!==null&&(e==null?void 0:e.username)!==void 0?p(e==null?void 0:e.username):p(e==null?void 0:e.gid))},[e]),u.useEffect(()=>{if(e!=null&&e.social_media){let c=[];const s=$(e==null?void 0:e.social_media,",");s!==null&&(s==null||s.map((m,N)=>{const C=$(m,"$"),S={mediaName:C[0],mediaHandle:C[1],baseUrl:C[2]};c.push(S)})),h(c)}},[e]),u.useEffect(()=>{},[l]),u.useEffect(()=>{if(t!=null&&t.facility_features){let c=[];const s=$(t==null?void 0:t.facility_features,"&");s!==null&&(s==null||s.map((N,C)=>{const S=$(N,"$"),r={featureId:S[0],userDescription:S[1]};c.push(r)}));const m=T(c);_(m)}},[t]),u.useEffect(()=>{e!==null&&(async s=>{let m=s==null?void 0:s.title;m+=s!=null&&s.address_one?", "+(s==null?void 0:s.address_one):"",m+=s!=null&&s.address_two?", "+(s==null?void 0:s.address_two):"",m+=s!=null&&s.city_name?", "+(s==null?void 0:s.city_name):"",m+=s!=null&&s.state_name?", "+(s==null?void 0:s.state_name):"",m+=s!=null&&s.zipcode?", "+(s==null?void 0:s.zipcode):"",m+=s!=null&&s.country_name?", "+(s==null?void 0:s.country_name):"";let N=`https://www.google.com/maps/search/?api=1&query=${m}`;k(N)})(e)},[e]),a.jsxs("div",{className:"bg-white w-full h-auto  overflow-hidden border   hover:shadow-md hover:shadow-gray-200 md:rounded-xl",children:[a.jsx("div",{className:"bg-gray-50/30 py-3 px-4 border-b-0",children:a.jsxs("a",{href:`/${n}`,children:[a.jsxs("div",{className:"flex place-content-between gap-2",children:[a.jsxs("div",{className:"flex place-items-start gap-2 w-full",children:[a.jsx("div",{className:"max-w-[85px] h-[90px] min-w-[85px]   bg-gray-50 bg-cover bg-center overflow-hidden relative border flex place-items-center place-content-center rounded",children:(e==null?void 0:e.image_url)!==null?a.jsx("img",{src:d,alt:"",className:` w-full h-auto text-sm
                             z-0 bg-gray-100`}):a.jsx(ae,{})}),a.jsxs("div",{className:" w-full",children:[a.jsx("div",{className:"text-[18px] font-normal text-blue-800 line-clamp-1 w-full",children:e==null?void 0:e.title}),(e==null?void 0:e.category)&&a.jsx("div",{className:"text-[12px] text-gray-500  capitalize mt-[0px]",children:(P=H(e==null?void 0:e.category))==null?void 0:P.name}),a.jsxs("div",{className:"flex place-items-center gap-x-1 mt-[5px] ",children:[a.jsx("div",{children:(t==null?void 0:t.average_rating)!==null&&(t==null?void 0:t.average_rating)!==""&&(t==null?void 0:t.average_rating)!==void 0?a.jsxs("div",{className:" flex gap-2 place-items-center",children:[a.jsx(F,{rating:Number(t==null?void 0:t.average_rating)}),a.jsx(I,{averageRating:t==null?void 0:t.average_rating})]}):a.jsxs("div",{className:" flex gap-2 place-items-center",children:[a.jsx(F,{rating:1}),a.jsx(I,{averageRating:0})]})}),a.jsx("div",{className:" ",children:Number(t==null?void 0:t.total_reviews)>0?t==null?void 0:t.total_reviews:0})]})]})]}),a.jsx("div",{className:"flex place-items-start",children:a.jsx("div",{className:"font-bold rounded-sm border px-3 py-[2px]",children:"View"})})]}),a.jsx("div",{className:"mt-[8px] text-[14px] md:text-[13px] text-gray-800 leading-[1.3em] line-clamp-3",children:e==null?void 0:e.short_description})]})}),a.jsx("div",{children:a.jsxs("div",{className:" h-auto flex place-content-between gap-2 ",children:[a.jsxs("div",{className:"flex place-items-start w-[60%] flex-col  pl-4  pt-2 pb-4 ",children:[a.jsxs("div",{className:"flex place-items-center gap-x-1",children:[a.jsx(W,{}),a.jsxs("span",{className:"mt-[1px] text-gray-500 space-x-2",children:[a.jsx("span",{className:"font-bold",children:"Founded:"}),a.jsx("span",{children:e==null?void 0:e.established})]})]}),j!==null&&a.jsxs("div",{className:"mt-2 flex place-items-start gap-2 w-full relative",children:[a.jsx("span",{className:"text-[13px]",children:"Facilities: "}),a.jsx("div",{className:"flex place-items-baseline gap-3 flex-wrap leading-[0.9em] ",children:j==null?void 0:j.map((c,s)=>a.jsx(Y,{tooltip:`${c==null?void 0:c.name}: ${(c==null?void 0:c.userDescription)||""}`,children:a.jsx("div",{className:"text-[15px]",children:c==null?void 0:c.icon})},s))})]})]}),a.jsxs("div",{className:"flex place-items-end flex-col w-[40%] text-end pr-4 pt-2 pb-4",children:[a.jsx("div",{className:"font-[600]",children:e==null?void 0:e.phone}),a.jsx("div",{className:"text-[12px] leading-[1.2em] mt-1",children:a.jsx(Z,{listing:e})})]})]})}),a.jsx("div",{className:"border-none",children:a.jsxs("div",{className:"flex place-content-between mx-4 my-1",children:[a.jsxs("div",{className:"flex place-items-center gap-4",children:[a.jsx("a",{href:`mailto:${e==null?void 0:e.email_address}`,children:a.jsx(K,{size:20})},34),(e==null?void 0:e.phone)&&a.jsx("a",{href:`tel:${e==null?void 0:e.phone}`,children:a.jsx(q,{size:20})},30),l!==null&&(l==null?void 0:l.map((c,s)=>a.jsx("a",{href:`${c==null?void 0:c.baseUrl}${c==null?void 0:c.mediaHandle}`,children:O(c==null?void 0:c.mediaName)},s)))]}),a.jsx("div",{className:"px-1.5 py-0.5 bg-red-500 rounded hover:shadow-lg text-white",children:a.jsx("a",{href:`${i}`,children:"Website"})})]})}),a.jsx("div",{className:"px-4 mb-4 mt-8",children:a.jsxs("div",{className:" grid grid-cols-2 gap-2 w-full md:w-[50%]",children:[a.jsx("a",{target:"_blank",href:`${E}`,className:"border border-blue-400 py-[5px] rounded px-2 font-semibold w-full text-center",children:"Go to map"}),a.jsx("div",{children:(t==null?void 0:t.phone)&&a.jsx("a",{href:`tel:${t==null?void 0:t.phone}`,children:a.jsxs("button",{className:"bg-gray-500 rounded w-full text-white flex place-items-center place-content-center text-[15px] gap-2 py-[5px]",children:[a.jsx(q,{size:20,className:"mt-[2px]"}),a.jsx("span",{children:"Call"})]})})})]})})]})},ce=()=>a.jsx("div",{className:"bg-white w-full h-auto md:rounded-t-md shadow-md overflow-hidden border",children:a.jsxs("div",{className:"bg-gray-50/30 py-3 px-4 border-b",children:[a.jsxs("div",{className:"flex place-content-between",children:[a.jsx("div",{className:"flex place-items-center gap-2",children:a.jsxs("div",{className:"-space-y-1",children:[a.jsx("div",{className:"text-black text-lg font-semibold",children:"Garsset.com"}),a.jsx("div",{className:"text-[12px] text-gray-500 italic capitalize",children:"Business Directory Service"})]})}),a.jsx("div",{className:"flex place-items-center"})]}),a.jsx("div",{className:"mt-[8px] text-[12px] text-gray-500 leading-[1.3em]",children:"The only real-time generative AI app for video chatting, live streaming, and video creation on the market."})]})});function B({pagination:e}){var p;const[v]=R(),x=e.currentPage,d=e.totalPages,o=()=>{if(d<=7)return Array.from({length:d},(h,i)=>i+1);const l=[];switch(l.push(1),x){case 1:l.push(2,3,"...",d);break;case 2:l.push(2,3,4,"...",d);break;case 3:l.push(2,3,4,5,"...",d);break;case d-2:l.push("...",d-3,d-2,d-1,d);break;case d-1:l.push("...",d-3,d-2,d-1,d);break;case d:l.push("...",d-2,d-1,d);break;default:l.push("...",x-1,x,x+1,"...",d);break}return l},n=l=>{const h=new URLSearchParams(v);return h.set("page",l.toString()),`?${h.toString()}`};return a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(x-1)*e.itemsPerPage+1," to"," ",Math.min(x*e.itemsPerPage,e.totalItems)," of"," ",e.totalItems," items"]}),a.jsxs("nav",{className:"flex items-center space-x-1",children:[a.jsx("a",{href:e.hasPrev?n(x-1):"#",className:`px-3 py-2 border rounded-md text-sm font-medium ${e.hasPrev?"text-gray-700 hover:bg-gray-100":"opacity-50 cursor-not-allowed text-gray-400"}`,"aria-disabled":!e.hasPrev,onClick:l=>!e.hasPrev&&l.preventDefault(),children:"Prev"}),(p=o())==null?void 0:p.map((l,h)=>typeof l=="number"?a.jsx("a",{href:n(l),className:`px-3 py-2 border rounded-md text-sm font-medium ${l===x?"bg-blue-500 text-white border-blue-500":"text-gray-700 hover:bg-gray-100"}`,children:l},l):a.jsx("span",{className:"px-3 py-2 text-gray-500",children:l},`ellipsis-${h}`)),a.jsx("a",{href:e.hasNext?n(x+1):"#",className:`px-3 py-2 border rounded-md text-sm font-medium ${e.hasNext?"text-gray-700 hover:bg-gray-100":"opacity-50 cursor-not-allowed text-gray-400"}`,"aria-disabled":!e.hasNext,onClick:l=>!e.hasNext&&l.preventDefault(),children:"Next"})]})]})}const te=({loading:e=!1,initialFilters:v={q:"",category:"",country:"",state:"",city:""}})=>{const x=z(),d=U(),[o,n]=u.useState(v),[p,l]=u.useState([]),[h,i]=u.useState([]),[b,t]=u.useState([]),[y,j]=u.useState([]);u.useEffect(()=>{const r=new URLSearchParams(d.search);n({q:r.get("q")||"",category:r.get("category")||"",country:r.get("country")||"",state:r.get("state")||"",city:r.get("city")||""})},[d.search]),u.useEffect(()=>{_(),E()},[]),u.useEffect(()=>{o.country?k(o.country):t([])},[o.country]),u.useEffect(()=>{o.country&&o.state?P(o.country,o.state):j([])},[o.country,o.state]);const _=async()=>{const r=Q.sort((f,w)=>f.name.localeCompare(w.name));l(r)},E=async()=>{try{const r=await J();i(r||[])}catch(r){console.error("Failed to fetch countries:",r)}},k=async r=>{try{const f=await V(r);t(f||[])}catch(f){console.error("Failed to fetch countries:",f)}},P=async(r,f)=>{try{const w=await X(r,f);j(w||[])}catch(w){console.error("Failed to fetch countries:",w)}},c=(r,f)=>{n(w=>({...w,[r]:f}))},s=r=>{c("country",r),k(r)},m=r=>{c("state",r),P(o.country,r)},N=()=>{const r=new URLSearchParams;o.q&&r.set("q",o.q),o.category&&r.set("category",o.category),o.country&&r.set("country",o.country),o.state&&r.set("state",o.state),o.city&&r.set("city",o.city),r.set("page","1"),x(`${d.pathname}?${r.toString()}`)},C=r=>{r.key==="Enter"&&N()},S=()=>{x(d.pathname)};return a.jsxs("div",{className:"w-full space-y-3 p-4 bg-gray-50 rounded-lg border",children:[a.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx("div",{className:"w-full",children:a.jsx("input",{id:"query",type:"text",value:o.q,onChange:r=>c("q",r.target.value),onKeyPress:C,placeholder:"Hotel, Restaurant or ABC Inc.",className:"w-full px-3 border border-gray-300 rounded outline-none h-[35px] focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:e})}),a.jsx("div",{className:"w-full",children:a.jsxs("select",{id:"category",value:o.category,onChange:r=>c("category",r.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:e,children:[a.jsx("option",{value:"",children:"All Categories"}),p.map((r,f)=>a.jsx("option",{value:r==null?void 0:r.id,children:r==null?void 0:r.name},r==null?void 0:r.id))]})})]}),a.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx("div",{className:"w-full",children:a.jsxs("select",{id:"country",value:o.country,onChange:r=>s(r.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:e,children:[a.jsx("option",{value:"",children:"All Countries"}),h.map(r=>a.jsx("option",{value:r.id,children:r.name},r.id))]})}),a.jsx("div",{className:"w-full",children:a.jsxs("select",{id:"state",value:o.state,onChange:r=>m(r.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:e||!o.country,children:[a.jsx("option",{value:"",children:"All States"}),b.map(r=>a.jsx("option",{value:r.id,children:r.name},r.id))]})})]}),a.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx("div",{className:"w-full",children:a.jsxs("select",{id:"city",value:o.city,onChange:r=>c("city",r.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:e||!o.state,children:[a.jsx("option",{value:"",children:"All Cities"}),y==null?void 0:y.map(r=>a.jsx("option",{value:r.name,children:r.name},r.id))]})}),a.jsxs("div",{className:"w-full flex gap-2",children:[a.jsx("button",{onClick:N,disabled:e,className:"flex-1 bg-blue-600 text-white h-[35px] px-4 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Searching...":"Search"}),a.jsx("button",{onClick:S,disabled:e,className:"px-4 h-[35px] border border-gray-300 rounded text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})]}),e&&a.jsx("div",{className:"text-center text-blue-600 text-sm",children:"Loading results..."})]})},fe=()=>{const e=D(),[v,x]=u.useState(!0),[d]=R(),o=M(),n=e.data.items||[],p=e.data.pagination,l=e.query,h=e.countries,[i,b]=u.useState(null);parseInt(d.get("page")||"1");const t=o.state==="loading";u.useEffect(()=>{l&&b(l)},[l]);const y={q:d.get("q")||"",category:d.get("category")||"",country:d.get("country")||"",state:d.get("state")||"",city:d.get("city")||""};return a.jsxs("div",{className:" bg-gray-50",children:[a.jsx(re,{}),a.jsx("div",{className:"h-screen flex flex-col relative ",children:a.jsxs("div",{className:"grid grid-cols-12 h-full overflow-hidden  gap-5 ",children:[a.jsxs("aside",{className:"col-span-3 h-full overflow-y-auto scrollbar-hidden pt-2 hidden xl:block",children:[a.jsxs("div",{className:"",children:[a.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Search Filter"}),a.jsx(te,{loading:t,initialFilters:y})]}),a.jsxs("div",{className:"",children:[a.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Categories"}),a.jsx(L,{})]}),a.jsxs("div",{className:"mt-5",children:[a.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Countries"}),h&&a.jsx(g,{countries:h})]}),a.jsx("div",{className:" py-4 px-4 border-t",children:"Garssete - Business Directory Listing"})]}),a.jsx("div",{className:"col-span-12 xl:col-span-9  overflow-y-auto w-full md:px-[15px]",children:a.jsxs("div",{className:"grid grid-cols-12 gap-5",children:[a.jsx("div",{className:"col-span-12 md:col-span-8  pt-3",children:a.jsxs("div",{className:"space-y-8",children:[a.jsx(B,{pagination:p}),n==null?void 0:n.map((j,_)=>a.jsx(se,{listing:j},_)),a.jsx(B,{pagination:p}),a.jsx(ce,{})]})}),a.jsx("div",{className:"hidden md:block md:col-span-4 pt-3    ",children:a.jsx("div",{className:"w-full xl:w-[90%] sticky top-3 ml-auto",children:a.jsx(ee,{})})})]})})]})})]})};export{fe as default};
