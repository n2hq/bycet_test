import{j as r}from"./jsx-runtime-0DLF9kdB.js";import{r as a,d as I,u as $}from"./components-C1WRcSP2.js";import{S as R}from"./SrchNavbar-v3O-bxE9.js";import{T as B,C as T,a as U,F as b}from"./Categories-CsQDTCfR.js";import{C as M,F as D}from"./FooterSection-Dgmmf3m7.js";import{V as G}from"./VerticalHeight-CjKseacd.js";import{f as C,s as _,h as O,i as q,n as z,m as H,o as V}from"./lib-DreLFYe8.js";import"./UserMenu-C1r7sh5-.js";import"./LeftNav-D5EQQ5QH.js";import"./AuthContext-DrjlFdzt.js";import"./css-CVxtJxAn.js";import"./index-wgSrWASC.js";import"./json-BweS2cG4.js";const Q=()=>{const[l,t]=a.useState(!1);return a.useEffect(()=>{},[]),null},P=({listing:l})=>r.jsxs("div",{className:"leading-[1.3em] ",children:[l!=null&&l.address_one?(l==null?void 0:l.address_one)+", ":"",l!=null&&l.state_code?(l==null?void 0:l.state_name)+", ":"",l!=null&&l.country_code?l==null?void 0:l.country_code:""]});function E({rating:l}){return r.jsx("div",{className:"flex gap-x-[2px]",children:Array.from({length:5}).map((t,e)=>{const o=Math.max(0,Math.min(1,l-e))*100;return r.jsx("div",{className:`relative w-[17px] h-[17px] bg-white rounded-full 
                            overflow-hidden flex place-items-center border-[1px]
                            place-content-center border-gray-500`,children:r.jsx("div",{className:"absolute inset-0 bg-green-600 z-[0]",style:{width:`${o}%`}})},e)})})}const F=({listing:l,index:t})=>{var f;const[e,o]=a.useState(null),[u,p]=a.useState(""),[d,y]=a.useState(""),[n,i]=a.useState(null),[x,h]=a.useState(null),[m,j]=a.useState("");return a.useEffect(()=>{e&&((e==null?void 0:e.image_url)!==""&&(e==null?void 0:e.image_url)!==null&&(e==null||e.image_url),(e==null?void 0:e.bg_image_url)!==""&&(e==null?void 0:e.bg_image_url)!==null&&(e==null?void 0:e.bg_image_url)!==void 0&&y(C.IMG_BASE_URL+(e==null?void 0:e.bg_image_url)),(e==null?void 0:e.username)!==""&&(e==null?void 0:e.username)!==null&&(e==null?void 0:e.username)!==void 0?j(e==null?void 0:e.username):j(e==null?void 0:e.gid))},[e]),a.useEffect(()=>{if(l){const c=l;o(c),p(C.IMG_BASE_URL+(c==null?void 0:c.image_url))}},[l]),a.useEffect(()=>{if(e!=null&&e.facility_features){let c=[];const s=_(e==null?void 0:e.facility_features,"&");s!==null&&(s==null||s.map((S,N)=>{const w=_(S,"$"),A={featureId:w[0],userDescription:w[1]};c.push(A)}));const v=O(c);console.log(v),h(v)}},[e]),a.useEffect(()=>{if(e!=null&&e.social_media){let c=[];const s=_(e==null?void 0:e.social_media,",");s!==null&&(s==null||s.map((v,S)=>{const N=_(v,"$"),w={mediaName:N[0],mediaHandle:N[1],baseUrl:N[2]};c.push(w)})),i(c)}},[e]),r.jsxs("div",{className:"border py-3 px-3 hover:shadow-md hover:shadow-gray-200",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"w-[90px] min-w-[90px] h-[90px] relative",children:r.jsx("img",{src:u,alt:"",className:" object-cover w-full h-full border"})}),r.jsxs("div",{className:"flex place-content-between w-full",children:[r.jsxs("div",{className:"w-full  block",children:[r.jsx("div",{className:"text-xl font-normal text-blue-700",children:r.jsx("a",{href:`/${m}`,children:e==null?void 0:e.title})}),r.jsx("div",{className:" mt-2 font-bold md:hidden",children:e==null?void 0:e.phone}),r.jsx("div",{className:"mt-2 md:hidden",children:r.jsx(P,{listing:e})}),(e==null?void 0:e.category)!==null&&(e==null?void 0:e.category)!==""&&r.jsx("div",{className:"text-[14px] mt-2",children:(f=q((e==null?void 0:e.category)||""))==null?void 0:f.name}),(e==null?void 0:e.average_rating)!==null&&(e==null?void 0:e.average_rating)!==""?r.jsxs("div",{className:"mt-2 flex gap-2 place-items-center",children:[r.jsx(E,{rating:Number(e==null?void 0:e.average_rating)}),r.jsx(k,{averageRating:e==null?void 0:e.average_rating})]}):r.jsxs("div",{className:"mt-2 flex gap-2 place-items-center",children:[r.jsx(E,{rating:3}),r.jsx(k,{averageRating:3})]}),(e==null?void 0:e.website)&&r.jsx("div",{className:"mt-2",children:r.jsx("a",{href:e==null?void 0:e.website,className:"text-blue-700",children:"Website"})}),n!==null&&r.jsx("div",{className:"mt-4 flex place-items-center gap-4",children:n==null?void 0:n.map((c,s)=>r.jsx("a",{href:`${c==null?void 0:c.baseUrl}${c==null?void 0:c.mediaHandle}`,children:z(c==null?void 0:c.mediaName)},s))})]}),r.jsxs("div",{className:"w-[200px] hidden md:block ",children:[r.jsx("div",{className:" text-end font-bold",children:e==null?void 0:e.phone}),r.jsx("div",{className:" text-end ",children:r.jsx(P,{listing:e})})]})]})]}),x!==null&&r.jsxs("div",{className:"mt-6 flex place-items-center gap-8 w-full relative",children:[r.jsx("span",{className:"text-[15px]",children:"Facilities: "}),r.jsx("div",{className:"flex place-items-center gap-3 flex-wrap ",children:x==null?void 0:x.map((c,s)=>r.jsx("a",{href:"",className:"text-[17px] block",children:r.jsx(B,{href:"#",tooltip:`${c==null?void 0:c.name}: ${(c==null?void 0:c.userDescription)||""}`,children:c==null?void 0:c.icon})},s))})]}),r.jsx("div",{className:" mt-4",children:(e==null?void 0:e.short_description)&&r.jsx("div",{className:"line-clamp-2 mt-2 text-[13px]",children:e==null?void 0:e.short_description})}),r.jsx("div",{className:"mt-8 max-w-[100%] md:max-w-[50%] w-full",children:r.jsxs("div",{className:" grid grid-cols-2 gap-2 w-full",children:[r.jsx("div",{className:"w-full",children:r.jsx("button",{className:"border border-blue-400 py-[5px] rounded px-2 font-semibold w-full",children:"Go to map"})}),r.jsx("div",{children:(e==null?void 0:e.phone)&&r.jsxs("button",{className:"bg-blue-700 rounded w-full text-white flex place-items-center place-content-center text-[15px] gap-2 py-[5px]",children:[r.jsx(H,{size:20,className:"mt-[2px]"}),r.jsx("span",{children:"Call"})]})})]})})]})},k=({averageRating:l})=>{const[t,e]=a.useState(0);return a.useEffect(()=>{l!=null&&e(l)},[l]),r.jsxs("div",{className:"text-blue-700 mt-[3px]",children:["(",V(Number(t)),")"]})},W=({data:l,itemsPerPage:t=10,resetPageKey:e})=>{const[o,u]=I(),p=Number(o.get("page"))||1,[d,y]=a.useState(p),n=Math.ceil(l.length/t),i=d*t,x=i-t,h=l.slice(x,i),m=c=>{y(c);const s=new URLSearchParams(o);s.set("page",String(c)),u(s)},j=()=>{d>1&&m(d-1)},f=()=>{d<n&&m(d+1)};return a.useEffect(()=>{e!==void 0&&m(1)},[e]),r.jsxs("div",{children:[r.jsx("div",{className:"space-y-6",children:h==null?void 0:h.map((c,s)=>r.jsx("div",{children:(s+1)%2?r.jsx("div",{children:r.jsx(F,{listing:c,index:s})}):r.jsxs(r.Fragment,{children:[r.jsx(F,{listing:c,index:s}),r.jsx(Q,{})]})},s))}),n>1&&r.jsxs("div",{className:"flex justify-center gap-[5px] mt-[60px]",children:[r.jsx("button",{onClick:j,disabled:d===1,className:"px-[12px] py-[8px] bg-white cursor-pointer border rounded-[4px]",children:"Previous"}),Array.from({length:n},(c,s)=>s+1).map(c=>r.jsx("button",{onClick:()=>m(c),className:`px-[12px] py-[8px] cursor-pointer border rounded-[4px] ${d===c?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:c},c)),r.jsx("button",{onClick:f,disabled:d===n,className:"px-[12px] py-[8px] bg-white cursor-pointer border rounded-[4px]",children:"Next"})]})]})},te=()=>{const l=$();I();const t=l.data,e=l.query,o=l.countries,[u,p]=a.useState(null);return a.useEffect(()=>{e&&p(e)},[e]),r.jsxs("div",{children:[r.jsx(R,{}),r.jsx("div",{className:"h-[140px] md:h-[80px]"}),r.jsxs("div",{className:"flex place-content-between md:gap-x-8",children:[r.jsxs("div",{className:" w-[350px] min-w-[350px] h-screen overflow-auto scrollbar-hidden sticky top-[80px] md:pr-6 hidden lg:block",children:[r.jsxs("div",{className:"",children:[r.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Categories"}),r.jsx(T,{})]}),r.jsxs("div",{className:"mt-5",children:[r.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Countries"}),o&&r.jsx(U,{countries:o})]}),r.jsx("div",{className:" py-4 px-4 border-t",children:"Garssete - Business Directory Listing"})]}),r.jsxs("div",{className:" flex md:place-content-between w-full md:gap-x-24 md:mr-[15px]",children:[r.jsx("div",{children:(t==null?void 0:t.length)>0?r.jsx(W,{data:t,itemsPerPage:20,resetPageKey:e}):r.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:r.jsx("span",{children:"no record"})})}),r.jsx("div",{className:"w-[350px] min-w-[350px] h-screen  sticky top-[80px] hidden lg:block",children:r.jsx(b,{})})]})]}),r.jsxs("div",{children:[r.jsx(G,{}),r.jsx(M,{}),r.jsx(D,{})]})]})};export{te as default};
