import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as t,e as Ne}from"./components-CqyJs_9b.js";import{A as Se}from"./AccountLayout-QOHrx1by.js";import{C as Ce}from"./ContentLayout-SpVwgp8S.js";import{bc as ne,Q as oe,bd as xe,S as me,u as he,f as re,x as _e,b2 as ke,B as Pe,a as De,a9 as Ee,be as Ie,ad as Ae}from"./lib-d-OCgvip.js";import{u as Le}from"./AuthContext-BH94oN1s.js";import{u as ae}from"./NotificationContext-CJEyd20o.js";import{u as ge}from"./OperationContext-BdFCpeXF.js";import{I as Me}from"./index-CTCnFI3k.js";import{u as Be,P as Re}from"./ProductSliderContext-DWZwJo3M.js";import{L as Ge}from"./LoadingMessage-B9wZrrAy.js";import"./LeftNav-Cj9_gra7.js";import"./HomeNav-C5gVOegL.js";import"./MainNav-oY7cNyR2.js";import"./BusinessMenu-CYgnqm1J.js";import"./BusinessDrawer-_Mi3vA0Y.js";const fe=({countryCurrency:s,setCountryCurrency:n,setSelectedCountry:o,selectedCountry:i})=>{const[a,g]=t.useState(void 0),[x,u]=t.useState(void 0),[d,j]=t.useState(""),h=t.useRef(null);t.useEffect(()=>{i&&j(i.country_name)},[i]);const[y,p]=t.useState(!0),[v,P]=t.useState(!1),[_,D]=t.useState(null);t.useEffect(()=>{v&&h.current&&setTimeout(()=>{var c;(c=h.current)==null||c.focus()},100)},[v]),t.useEffect(()=>{u(a)},[a]),t.useEffect(()=>{(async()=>{try{p(!0);const m=await xe();g(m)}catch(m){console.error("Failed to fetch countries:",m),g(void 0)}finally{p(!1)}})()},[]),document.getElementById("country_currency");const k=t.useRef(null);t.useEffect(()=>{if(i&&k.current){let c=i.country_name+" - ";c+=i.name+" ",c+=i.currency_symbol,c+=" ",c+=i.emoji,k.current.value=c}},[i]);const E=c=>{if(k.current){let m=c.country_name+" - ";m+=c.name+" ",m+=c.currency_symbol,m+=" ",m+=c.emoji,k.current.value=m,P(!1),o(c)}},[I,R]=t.useState("");return e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"country_currency",ref:k,onClick:()=>P(!0),onChange:c=>{const m=c.target.value,A=ne(a,m);u(A),n(c.target.value)},placeholder:"Select Currency",className:"w-full bg-gray-100 px-3  py-3 mb-1 rounded-lg border-[1px] border-gray-300"}),e.jsx("div",{className:`fixed w-full top-0 left-0 h-full bg-black/25 z-3000 ${v?"block":"hidden"} flex place-items-center place-content-center px-2`,onClick:()=>P(!1),children:e.jsx("div",{onClick:c=>c.stopPropagation(),className:"px-2 max-w-[600px] mx-auto w-full",children:e.jsxs("div",{className:"overflow-hidden bg-white rounded-3xl relative",children:[e.jsx("div",{className:"text-2xl pt-8 pb-8 px-4 border-b",children:"Select Currency"}),e.jsx("div",{className:"text-3xl absolute top-7 right-4 w-fit h-fit p-2 rounded-xl bg-gray-100 cursor-pointer",onClick:()=>P(!1),children:e.jsx(oe,{})}),e.jsx("input",{ref:h,type:"text",className:" w-full bg-gray-100 p-4 text-lg outline-none",placeholder:"Type here...",onChange:c=>{const m=c.target.value,A=ne(a,m);u(A),n(c.target.value)}}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:x==null?void 0:x.map((c,m)=>e.jsx("div",{className:"cursor-pointer",onClick:()=>{E(c)},children:e.jsxs("div",{className:"text-lg p-2 border gap-1 first:border-t-0",children:[c.country_name," - ",c.name," ",c.emoji]})},m))}),e.jsx("div",{className:"h-[30px]"})]})})})]})},ye=t.createContext(null);function Ue(){return t.useContext(ye)}function Oe({children:s}){const[n,o]=t.useState(!1),[i,a]=t.useState(!1),[g,x]=t.useState(null),[u,d]=t.useState(null),[j,h]=t.useState(null),[y,p]=t.useState(!1),[v,P]=t.useState(null),[_,D]=t.useState(null),[k,E]=t.useState(null),[I,R]=t.useState(null),[c,m]=t.useState(!0),[A,H]=t.useState(null),[G,W]=t.useState(null),[F,ce]=t.useState(void 0),[T,Z]=t.useState(""),[be,we]=t.useState(null),z=t.useRef(null),K=ae(),{showOperation:$,showError:J,completeOperation:V,showSuccess:q}=ge();t.useEffect(()=>{F&&Z(F.id)},[F,T]);const U=()=>{a(!1),x(null),o(!1)},O=()=>{var r;(r=z.current)==null||r.click()},Q=r=>{var S;const N=(S=r.target.files)==null?void 0:S[0];if(N){const l=URL.createObjectURL(N);x(l),P(N),p(!0)}},ee=async()=>{$("processing"),o(!0),await new Promise(C=>setTimeout(C,1e3));let r=document.getElementById("product_title"),N=document.getElementById("product_description"),S=document.getElementById("product_link");const l=new FormData;y&&l.append("file",v),l.append("guid",u),l.append("bid",j),l.append("product_title",r.value||""),l.append("product_description",N.value||""),l.append("product_link",S.value||""),l.append("product_amount",A);const b=T||"840";l.append("product_currency_country_id",b);const f=re.IMG_BASE_URL+"/business_gallery_product_upload";try{const C=await fetch(f,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},body:l});if(C.ok)try{q("Success","Product saved."),V()}finally{window.location.reload()}else{let Y=C.json().then(B=>{console.log(B.message),J("Error",`Failed to add product: ${B.message}`),V()})}}catch{return}finally{o(!1)}},te=async(r,N,S)=>{const w="https://tpics.gasimg.com"+"/delete_business_gallery_pic",f={guid:r,bid:N,image_guid:S};o(!0),await new Promise(C=>setTimeout(C,1e3));try{const C=await fetch(w,{method:"POST",headers:he,body:JSON.stringify(f)});if(C.ok)K.alertReload("","Image deleted successfully!");else{let Y=C.json().then(B=>{K.alert(B.message)})}}catch(C){return alert(C.message)}finally{o(!1)}},X=r=>{[46,8,9,27,13,110,190].indexOf(r.keyCode)!==-1||r.keyCode===65&&r.ctrlKey===!0||r.keyCode===67&&r.ctrlKey===!0||r.keyCode===86&&r.ctrlKey===!0||r.keyCode===88&&r.ctrlKey===!0||r.keyCode>=35&&r.keyCode<=39||(r.shiftKey||r.keyCode<48||r.keyCode>57)&&(r.keyCode<96||r.keyCode>105)&&r.preventDefault()},se=r=>{let N=r.target.value;N=N.replace(/[^\d.]/g,"");const S=N.split(".");S.length>2&&(N=S[0]+"."+S.slice(1).join("")),S.length>1&&(N=S[0]+"."+S[1].slice(0,2)),H(N)};let le={dialog:i,setDialog:a,handleCloseDialog:U,imgSrc:g,setImgSrc:x,userGuid:u,setUserGuid:d,businessGuid:j,setBusinessGuid:h,isImgSelected:y,setIsImageSelected:p,selectedFile:v,setSelectedFile:P,productTitle:_,setProductTitle:D,productDescription:I,setProductDescription:R,productLink:k,setProductLink:E,deleteProduct:te};return e.jsxs(ye.Provider,{value:le,children:[i&&e.jsx("div",{onMouseDown:r=>a(!1),className:`fixed flex w-screen h-screen z-[3100] 
                 top-0 left-0 right-0 bottom-0 bg-black/30
                place-content-center place-items-center`,children:e.jsxs("div",{className:`relative max-w-[600px] w-full h-fit bg-white mx-2
                        rounded-[40px] overflow-hidden z-[3100] `,onMouseDown:r=>r.stopPropagation(),children:[e.jsx(Fe,{setShow:a}),e.jsxs("div",{className:"pt-12 pb-6 px-6 flex place-items-baseline place-content-between gap-3",children:[e.jsx("div",{className:"text-2xl font-semibold w-full ",children:"Add Product"}),e.jsx("div",{className:" relative w-full",children:e.jsx("div",{className:"w-[70%] flex place-content-end hover:underline relative",children:c?e.jsx(de,{title:"Full View",setFullView:m,fullView:!1}):v&&e.jsx(de,{title:"Normal View",setFullView:m,fullView:!0})})})]}),e.jsxs("div",{className:"w-full h-[400px] overflow-y-auto",children:[e.jsxs("div",{className:"relative w-full h-[300px] bg-gray-300",children:[e.jsx("img",{src:g,alt:"",className:`${c?"object-scale-down":"object-cover"} w-full h-full`}),e.jsx("input",{type:"file",accept:"image/*",ref:z,className:"hidden",onChange:Q}),e.jsx("div",{className:`flex place-content-center place-items-center
                                        bg-black/10 w-full h-full absolute z-0 top-0 object-cover
                                        text-white/80 `,onMouseDown:O,children:e.jsx("div",{className:`w-[60px] h-[60px] flex flex-col
                                        place-content-center place-items-center bg-black/50
                                        hover:cursor-pointer hover:bg-white/50
                                        rounded-full transition duration-300 ease-in-out`,children:e.jsx(me,{className:" text-[30px]"})})})]}),e.jsxs("div",{className:"h-fit space-y-1",children:[e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[15px] pt-3 pb-1 text-gray-500",children:"Enter product title"}),e.jsx("input",{onChange:r=>D(r.target.value),id:"product_title",value:_||"",placeholder:"Enter product title.",className:"w-full border-[1px] border-gray-300 bg-gray-100 px-3 py-4 outline-none rounded-lg text-xl"})]}),e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[15px] pt-3 pb-1 text-gray-500",children:"Enter product description"}),e.jsx("textarea",{onChange:r=>R(r.target.value),id:"product_description",value:I||"",placeholder:"Enter product description.",className:"w-full border-[1px] border-gray-300 bg-gray-100 px-3 py-4 outline-none rounded-lg text-xl"})]}),e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[14px] pt-3 pb-1 text-gray-500",children:"Enter product link"}),e.jsx("input",{onChange:r=>E(r.target.value),id:"product_link",value:k||"",placeholder:"Enter product link.",className:"w-full border-[1px] border-gray-300 bg-gray-100 px-3 py-4 outline-none rounded-lg"})]}),e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[15px] pt-3 pb-1 text-gray-500",children:"Currency"}),e.jsx("div",{className:"",children:e.jsx(fe,{countryCurrency:G,setCountryCurrency:W,setSelectedCountry:ce,selectedCountry:F})})]}),e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[15px] pt-3 pb-1 text-gray-500",children:"Amount"}),e.jsx("div",{className:"",children:e.jsx("input",{onKeyDown:X,onChange:se,id:"product_amount",value:A||"",placeholder:"Enter Amount. E.g.: 500.00",className:"w-full bg-gray-100 px-3  py-3 mb-1 rounded-lg border-[1px] border-gray-300"})})]}),e.jsxs("div",{className:"flex place-content-end mx-6 gap-2 pt-4 pb-8",children:[e.jsx("button",{onMouseDown:()=>U(),className:`bg-gray-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md `,children:"Cancel"}),e.jsx("button",{onClick:()=>ee(),className:`bg-blue-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md `,children:n?"Working...":"Submit"})]})]})]})]})}),s]})}const Fe=({setShow:s})=>e.jsx("div",{className:"absolute top-8 right-6 text-3xl  rounded-xl  w-[40px] h-[40px] shadow-sm flex place-items-center place-content-center cursor-pointer bg-gray-200/70 hover:border-gray-200/50 text-gray-400 hover:text-gray-500 z-10",onClick:()=>s(!1),children:e.jsx(oe,{})}),de=({title:s,setFullView:n,fullView:o})=>e.jsx("div",{className:"cursor-pointer text-lg underline",onClick:()=>n(o),children:s}),Te=({userGuid:s,businessGuid:n})=>{const o=Ue(),i=()=>{o.setDialog(!0),o.setUserGuid(s),o.setBusinessGuid(n)};return e.jsx("div",{className:"mb-2",children:e.jsx("button",{onMouseDown:i,className:` bg-blue-800 rounded-md px-3 py-1
                text-white hover:bg-blue-700 transition
                duration-500 ease-in-out hover:shadow-md
                 shadow-gray-900 hover:shadow-black/50`,children:"Add Product"})})},ve=t.createContext(null);function ze(){const s=t.useContext(ve);return s||null}function Ke({children:s}){const[n,o]=t.useState(!1),[i,a]=t.useState(!1),[g,x]=t.useState(null),[u,d]=t.useState(null),[j,h]=t.useState(null),[y,p]=t.useState(!1),[v,P]=t.useState(null),[_,D]=t.useState(null),[k,E]=t.useState(null),[I,R]=t.useState(null),[c,m]=t.useState(null),[A,H]=t.useState(null),[G,W]=t.useState(void 0),[F,ce]=t.useState(null),[T,Z]=t.useState("null"),[be,we]=t.useState(null),[z,K]=t.useState(!0),$=t.useRef(null);ae();const[J,V]=t.useState("");t.useEffect(()=>{G&&V(G.id)},[G,J]);const{showOperation:q,showError:U,completeOperation:O,showSuccess:Q}=ge(),ee=l=>{[46,8,9,27,13,110,190].indexOf(l.keyCode)!==-1||l.keyCode===65&&l.ctrlKey===!0||l.keyCode===67&&l.ctrlKey===!0||l.keyCode===86&&l.ctrlKey===!0||l.keyCode===88&&l.ctrlKey===!0||l.keyCode>=35&&l.keyCode<=39||(l.shiftKey||l.keyCode<48||l.keyCode>57)&&(l.keyCode<96||l.keyCode>105)&&l.preventDefault()},te=l=>{let b=l.target.value;b=b.replace(/[^\d.]/g,"");const w=b.split(".");w.length>2&&(b=w[0]+"."+w.slice(1).join("")),w.length>1&&(b=w[0]+"."+w[1].slice(0,2)),m(b)},X=()=>{a(!1),x(null),o(!1)},se=()=>{var l;(l=$.current)==null||l.click()},le=l=>{var w;const b=(w=l.target.files)==null?void 0:w[0];if(b){const f=URL.createObjectURL(b);x(f),P(b),p(!0)}},r=async()=>{q("processing"),o(!0),await new Promise(M=>setTimeout(M,1e3));let l=document.getElementById("product_title"),b=document.getElementById("product_description"),w=document.getElementById("product_link");const f=new FormData;y&&f.append("file",v),f.append("guid",u),f.append("bid",j),f.append("product_title",l.value),f.append("product_description",b.value),f.append("product_link",w.value),f.append("product_guid",T),f.append("product_amount",c);const C=J||"840";f.append("product_currency_country_id",C);const L="https://tpics.gasimg.com"+"/business_gallery_product_update";console.log(Object.fromEntries(f.entries()));try{const M=await fetch(L,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},body:f});if(M.ok)Q("Success","Product saved."),O();else{let ie=M.json().then(je=>{console.log(je.message),U("Error","Update failed"),O()})}}catch{return}finally{o(!1)}};let S={dialog:i,setDialog:a,handleCloseDialog:X,imgSrc:g,setImgSrc:x,userGuid:u,setUserGuid:d,businessGuid:j,setBusinessGuid:h,isImgSelected:y,setIsImageSelected:p,selectedFile:v,setSelectedFile:P,productTitle:_,setProductTitle:D,productDescription:k,setProductDescription:E,productLink:I,setProductLink:R,productGuid:T,setProductGuid:Z,deleteProduct:async(l,b,w)=>{const Y="https://tpics.gasimg.com"+"/delete_business_product",B={guid:l,bid:b,product_guid:w};q("processing"),o(!0),await new Promise(L=>setTimeout(L,1e3));try{const L=await fetch(Y,{method:"POST",headers:he,body:JSON.stringify(B)});if(L.ok)try{Q("Success","Product deleted."),O(),await new Promise(M=>setTimeout(M,500))}finally{window.location.reload()}else{let M=L.json().then(ie=>{console.log(ie),U("Error","Delete failed."),O()})}}catch(L){U("Error","Product delete failed."),console.log(L.message)}finally{o(!1)}},setSelectedCountry:W,setProductCurrencyId:V,setProductAmount:m};return e.jsxs(ve.Provider,{value:S,children:[i&&e.jsx("div",{className:"fixed w-screen h-screen bg-black/30 z-[3000]",children:e.jsx("div",{className:`fixed flex w-screen h-screen z-[3000] 
                 top-0 left-0 right-0 bottom-0 bg-black/30
                place-content-center place-items-center`,children:e.jsxs("div",{className:`relative max-w-[600px] w-full h-fit bg-white 
                        rounded-[40px] overflow-hidden z-[3100] mx-2 `,children:[e.jsx(ue,{setShow:a}),e.jsxs("div",{className:"pt-12 pb-6 px-6 flex place-items-baseline place-content-between gap-3",children:[e.jsx("div",{className:"text-2xl font-semibold w-full ",children:"Edit Product"}),e.jsx("div",{className:" relative w-full",children:e.jsx("div",{className:"w-[70%] flex place-content-end hover:underline relative",children:z?e.jsx(pe,{title:"Full View",setFullView:K,fullView:!1}):e.jsx(pe,{title:"Normal View",setFullView:K,fullView:!0})})})]}),e.jsxs("div",{className:"w-full h-[400px] overflow-y-auto",children:[e.jsxs("div",{className:"relative w-full h-[300px] bg-white",children:[e.jsx("img",{src:g,alt:"",className:`${z?"object-scale-down":"object-cover"} w-full h-full`}),e.jsx("input",{type:"file",accept:"image/*",ref:$,className:"hidden",onChange:le}),e.jsx("div",{className:`flex place-content-center place-items-center
                                        bg-black/10 w-full h-full absolute z-0 top-0 object-cover
                                        text-white/80 `,onMouseDown:se,children:e.jsx("div",{className:`w-[60px] h-[60px] flex flex-col
                                        place-content-center place-items-center bg-white/50
                                        hover:cursor-pointer hover:bg-white/50
                                        rounded-full transition duration-300 ease-in-out`,children:e.jsx(me,{className:" text-[30px]"})})})]}),e.jsxs("div",{className:"h-fit space-y-1",children:[e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx(ue,{setShow:a}),e.jsx("div",{className:"text-[15px] pt-3 pb-1 text-gray-500",children:"Product title"}),e.jsx("input",{onChange:l=>D(l.target.value),id:"product_title",value:_||"",placeholder:"Enter product title.",className:"w-full bg-gray-100 px-3  py-3 mb-1 rounded-lg border-[1px] border-gray-300"})]}),e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[15px] pt-3 pb-1 text-gray-500",children:"Description"}),e.jsx("textarea",{onChange:l=>E(l.target.value),id:"product_description",value:k||"",placeholder:"Enter product description.",className:"w-full bg-gray-100 px-3  h-[60px] py-3 rounded-lg border-[1px] border-gray-300"})]}),e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[14px] pt-3 pb-1 text-gray-500",children:"Product link"}),e.jsx("input",{onChange:l=>R(l.target.value),id:"product_link",value:I||"",placeholder:"Enter product link.",className:"w-full bg-gray-100 px-3 py-3 rounded-lg border-[1px] border-gray-300 "})]}),e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[15px] pt-3 pb-1 text-gray-500",children:"Currency"}),e.jsx("div",{className:"",children:e.jsx(fe,{countryCurrency:A,setCountryCurrency:H,setSelectedCountry:W,selectedCountry:G})})]}),e.jsxs("div",{className:"flex mb-1 flex-col mx-6 ",children:[e.jsx("div",{className:"text-[15px] pt-3 pb-1 text-gray-500",children:"Amount"}),e.jsx("div",{className:"",children:e.jsx("input",{onKeyDown:ee,onChange:te,id:"product_amount",value:c||"",placeholder:"Enter Amount. E.g.: 500.00",className:"w-full bg-gray-100 px-3  py-3 mb-1 rounded-lg border-[1px] border-gray-300"})})]}),e.jsxs("div",{className:"flex place-content-end mx-6 gap-2 pt-4 pb-6",children:[e.jsx("button",{onMouseDown:()=>window.location.reload(),className:`bg-gray-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md`,children:"Reload"}),e.jsx("button",{onMouseDown:()=>X(),className:`bg-gray-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md `,children:"Close"}),e.jsx("button",{onClick:()=>r(),className:`bg-blue-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md `,children:n?"Working...":"Submit"})]})]})]})]})})}),s]})}const ue=({setShow:s})=>e.jsx("div",{className:"absolute top-8 right-8 text-3xl  rounded-xl  w-[40px] h-[40px] shadow-sm flex place-items-center place-content-center cursor-pointer bg-gray-200/70 hover:border-gray-200/50 text-gray-400 hover:text-gray-500",onClick:()=>s(!1),children:e.jsx(oe,{})}),pe=({title:s,setFullView:n,fullView:o})=>e.jsx("div",{className:" cursor-pointer text-lg underline",onClick:()=>n(o),children:s}),Ve=({product:s,menu:n,userGuid:o,businessGuid:i})=>{const[a,g]=t.useState(!1),[x,u]=t.useState(null),d=ze();ae();const j=async()=>{d.setDialog(!0),d.setImgSrc(re.IMG_BASE_URL+s.product_image_url),d.setProductTitle(s.product_title),d.setProductDescription(s.product_description),d.setProductLink(s.product_link),d.setProductGuid(s.product_guid),d.setProductAmount(s.product_amount),d.setProductCurrencyId(s.product_currency_country_id),d.setUserGuid(o),d.setBusinessGuid(i);const y=await xe(),p=ne(y,s.product_currency_country_id);let v;p&&p.length>0&&(v=p[0]),d.setSelectedCountry(v)},h=async()=>{d.deleteProduct(o,i,s.product_guid)};return e.jsx("div",{className:"",children:n&&e.jsx("div",{className:` absolute top-2 right-2 w-[80%] bg-white
                rounded-[12px] overflow-hidden border-[1px] border-white
                shadow-md`,children:e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:" divide-y-[1px]",children:[e.jsx("div",{onMouseDown:j,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Edit"}),e.jsx("div",{onMouseDown:h,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Delete"})]})})})})},We=({showCarousel:s,product:n,itemIndex:o,userGuid:i,businessGuid:a})=>{const[g,x]=t.useState(!1),[u,d]=t.useState(null),j="https://tpics.gasimg.com";let h="";n.product_image_url?h=j+n.product_image_url:h="https://trendyblinds.ca/wp-content/uploads/2023/09/3.-3D-WALLPAPER-SKU0015.jpg";const[y,p]=t.useState(h),v=()=>{x(!0)},P=async()=>{await new Promise(_=>setTimeout(_,200)),x(!1)};return t.useEffect(()=>{if(n){const _=_e(n==null?void 0:n.product_link);d(_)}},[n]),e.jsx("div",{className:"z-0",children:e.jsxs("div",{className:`border-[1px] h-fit p-1 rounded-md shadow-md
                    hover:cursor-pointer relative z-0`,children:[e.jsx("button",{onMouseDown:v,onBlur:P,className:`w-[30px] h-[30px] z-50 bg-white 
                flex place-content-center place-items-center 
                rounded-full absolute right-2 top-2 cursor-pointer
                hover:bg-gray-500 hover:text-white/80 transition duration-1000 ease-in-out`,children:e.jsx(ke,{className:"text-[20px]"})}),e.jsx("div",{onMouseDown:_=>s(o),className:`relative h-[100px] md:h-[170px] xl:h-[160px]
                         rounded-md overflow-hidden -z-10
                    `,children:e.jsx("img",{src:re.IMG_BASE_URL+(n==null?void 0:n.product_image_url),alt:"",className:`object-cover w-full h-full -z-40
                        `})}),(n==null?void 0:n.product_title).length>0&&e.jsx("div",{className:"text-[13px] mt-2 mb-1.5 leading-[1.2em] mx-[2px] line-clamp-2",children:n==null?void 0:n.product_title}),e.jsx(Ve,{product:n,menu:g,userGuid:i,businessGuid:a})]})})},$e=({slides:s,selectedSlide:n,handleClose:o})=>{const[i,a]=t.useState(0);t.useRef(0),t.useRef(0);const g=()=>{a(u=>u===0?s.length-1:u-1)},x=()=>{a(u=>u===s.length-1?0:u+1)};return t.useEffect(()=>{n!==null&&a(n-1)},[n]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 ",children:[e.jsxs("div",{className:"col-span-12 md:col-span-9 w-full h-full relative bg-black flex",children:[e.jsx("div",{className:" w-auto h-screen flex overflow-hidden",children:s.map((u,d)=>e.jsx("img",{src:u.image_url,alt:"",style:{transform:`translateX(-${i*100}%)`},className:`object-scale-down w-full h-full 
                                            block flex-shrink-0 flex-grow-0 transition-transform
                                            ease-in-out duration-1000`},d))}),e.jsx("button",{onMouseDown:g,className:`block absolute top-0 bottom-0 
                p-[1rem] cursor-pointer left-0 group h-full 
                transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(Pe,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:x,className:`block absolute top-0 bottom-0 
                    p-[1rem] cursor-pointer right-0 group 
                     transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(De,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("div",{onMouseDown:()=>o(),className:`w-[50px] h-[50px] z-[300] bg-white
                    flex place-content-center place-items-center
                    rounded-full absolute left-2 top-2 cursor-pointer
                    hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(Me,{className:"text-[30px]"})})]}),e.jsxs("div",{className:"hidden md:block md:col-span-3 px-5",children:[e.jsx("h1",{className:" text-[22px] my-4 font-sans font-extrabold tracking-tight leading-[24px]",children:"Photos for Jason Won, DPT - Flex With Doctor Jay"}),e.jsxs("div",{className:" my-4 ",children:[i+1," / ",s.length]}),e.jsx("hr",{}),e.jsx("div",{className:" my-4",children:s[i].image_title})]})]})})},Je=({overlay:s,setOverlay:n,selectedSlide:o,handleClose:i,gallery:a})=>e.jsx("div",{children:s&&e.jsx("div",{className:`flex w-screen h-screen bg-white z-[1000] 
                fixed top-0 left-0 right-0 bottom-0 `,children:a&&o&&e.jsx($e,{slides:a,selectedSlide:o,handleClose:i})})}),qe=({productGallery:s,userGuid:n,businessGuid:o,listing:i})=>{const[a,g]=t.useState(!1),[x,u]=t.useState(0),d=Be(),j=()=>{g(!1)},h=y=>{d.setDialog(!0),d.setSelectedSlide(y+1),d.setGallery(s),d.setListing(i)};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:` border-[1px] p-3 rounded-[5px] 
                grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4
                lg:grid-cols-4 xl:grid-cols-5 gap-2 z-0`,children:s==null?void 0:s.map((y,p)=>e.jsx("div",{className:"z-0",children:e.jsx(We,{showCarousel:h,product:y,itemIndex:p,userGuid:n,businessGuid:o})},p))}),e.jsx(Je,{overlay:a,setOverlay:g,selectedSlide:x+1,handleClose:j,gallery:s})]})},ut=()=>{t.useEffect(()=>{Ee(localStorage)},[]);const[s,n]=t.useState(""),[o,i]=t.useState(""),[a,g]=t.useState(null),[x,u]=t.useState(null),[d,j]=t.useState(!0),{business_guid:h,user_guid:y}=Ne(),[p,v]=t.useState(null);return Le()?(t.useEffect(()=>{const _=async(D,k)=>{n(D),i(k);const E=await Ie(D,k);g(E);const I=await Ae(D||"");v(I)};try{h&&y&&_(h,y)}catch(D){console.log(D.message)}},[h,y]),t.useEffect(()=>{s&&o&&a&&p&&(u({businessGuid:s,userGuid:o,productGallery:a,businessProfile:p}),j(!1))},[s,o,a,p]),d?e.jsx(Ge,{}):e.jsx(Ke,{children:e.jsx(Re,{children:e.jsx(Oe,{children:e.jsx(Se,{children:e.jsxs(Ce,{title:"Product Settings",businessGuid:s,data:x,businessProfile:p,children:[s&&o&&e.jsx(Te,{userGuid:o,businessGuid:s}),a!==null&&(a==null?void 0:a.length)>0?e.jsx("div",{className:"z-0",children:e.jsx(qe,{productGallery:a,userGuid:o,businessGuid:s,listing:p})}):e.jsx("div",{className:" mt-2 border-[1px] rounded-lg p-3 mb-6",children:"Video Gallery is empty."})]})})})})})):null};export{ut as default};
