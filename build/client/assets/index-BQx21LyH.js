import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as l,L as P,d as g,b as S}from"./components-QUucBwvO.js";import{A as _}from"./AccountLayout-C1W-A3vS.js";import{u as k}from"./AuthContext-D6RspcLh.js";import{h as L,N as $,z as E,aQ as I,O as C,au as A,r as B,aR as M}from"./lib-gXVz7xpy.js";import{L as R}from"./LoadingMessage-bRJt_uvW.js";import"./AccountUserImage-zrnI0bEK.js";import"./HomeNav-BhFtCvZb.js";import"./MainNav-DJZKCZXI.js";import"./index-D4GH3UrM.js";const U=()=>e.jsxs("div",{className:"bg-gray-100 min-w-full min-h-full flex place-items-center place-content-center  flex-col gap-y-[2px]",children:[e.jsx(L,{className:"text-gray-300 text-2xl relative top-1"}),e.jsx("div",{className:"text-[8px] text-gray-300 tracking-wide",children:"BYCET"})]}),q=({listing:a,index:r})=>{const[c,m]=l.useState("/images/bycetplaceholder.png"),[x,i]=l.useState("");function t(u){return u%2!==0}return l.useEffect(()=>{if(a&&(a==null?void 0:a.image_url)!==null){let u=$.IMG_BASE_URL+(a==null?void 0:a.image_url);i(u)}else i(c)},[a]),e.jsx("div",{className:" cursor-pointer my-0",children:e.jsxs("div",{className:`flex rounded  gap-x-2 py-2 px-1
             hover:bg-blue-50  
             ${t(r),""}
                `,children:[e.jsx("div",{className:`relative min-w-[46px] w-[46px] h-[45px]
                    rounded-md overflow-hidden border bg-transparent bg-cover bg-center`,style:{backgroundImage:`url(${c})`},children:(a==null?void 0:a.image_url)!==null?e.jsx("img",{src:x,alt:a.title,className:`object-cover w-full h-full text-sm bg-white
                             `}):e.jsx(U,{})}),e.jsx("div",{className:" w-full",children:e.jsx(P,{to:`/web/account/portfolio/${a.gid}`,children:e.jsxs("div",{className:`md:flex md:place-content-between 
                w-full md:gap-x-[4px]`,children:[e.jsxs("div",{className:"w-full md:w-[60%] -space-y-1 block",children:[e.jsx("div",{className:"font-bold text-[14px] text-brown-800 line-clamp-1",children:a.title}),e.jsx("div",{className:"font-normal text-[11.5px] flex place-items-center gap-1",children:e.jsx("div",{className:"capitalize flex place-items-center ",children:a.category})}),e.jsx("div",{className:`font-normal text-[11px] 
                                    flex place-items-center gap-1 `,children:a!=null&&a.active_status?"Active":"Inactive"})]}),e.jsxs("div",{className:`w-full lg:w-[40%] hidden 
                                sm:block`,children:[e.jsx("div",{className:"flex flex-col place-items-end place-content-end font-bold text-black tracking-tighter",children:a.phone}),e.jsxs("div",{className:`flex flex-col text-end text-[12px]
                                leading-[1.2em]`,children:[a==null?void 0:a.address_one,a!=null&&a.address_two?`, ${a==null?void 0:a.address_two}`:"",a!=null&&a.city_name?`, ${a==null?void 0:a.city_name}`:"",a!=null&&a.state_name?`, ${a==null?void 0:a.state_name}`:"",a!=null&&a.country_name?`, ${a==null?void 0:a.country_name}`:""]})]})]})})})]})})},z=({data:a,itemsPerPage:r=3,resetPageKey:c})=>{const[m,x]=g(),i=Number(m.get("page"))||1,[t,u]=l.useState(i),s=Math.ceil(a.length/r),b=t*r,N=b-r,h=a.slice(N,b),d=o=>{u(o);const p=new URLSearchParams(m);p.set("page",String(o)),x(p)},j=()=>{t>1&&d(t-1)},f=()=>{t<s&&d(t+1)};l.useEffect(()=>{c!==void 0&&d(1)},[c]);const v=()=>{if(s<=3)return Array.from({length:s},(n,y)=>y+1).map(n=>e.jsx("button",{onClick:()=>d(n),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${t===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n));const o=[];t>2&&(o.push(e.jsx("button",{onClick:()=>d(1),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${t===1?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:"1"},1)),t>3&&o.push(e.jsx("span",{className:"px-2",children:"…"},"start-ellipsis")));const p=Math.max(1,t-1),w=Math.min(s,t+1);for(let n=p;n<=w;n++)o.push(e.jsx("button",{onClick:()=>d(n),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${t===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n));return t<s-1&&(t<s-2&&o.push(e.jsx("span",{className:"px-2",children:"…"},"end-ellipsis")),o.push(e.jsx("button",{onClick:()=>d(s),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${t===s?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:s},s))),o};return e.jsxs("div",{children:[e.jsx("div",{className:"divide-gray-500/20 divide-y-[1px]",children:h.map((o,p)=>e.jsx("div",{children:e.jsx(q,{index:p+1,listing:o})},p))}),s>1&&e.jsxs("div",{className:"flex justify-center gap-[5px] mt-[20px] text-[13px] border-t pt-6",children:[e.jsx("button",{onClick:j,disabled:t===1,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Previous"}),v(),e.jsx("button",{onClick:f,disabled:t===s,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Next"})]})]})},O=({user:a,portfolio:r})=>e.jsx("div",{className:" h-fit pl-[5px] pr-[10px]",children:(r==null?void 0:r.length)>0?e.jsx(z,{data:r,itemsPerPage:7}):e.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:e.jsx("span",{children:"no record"})})}),G=({query:a})=>e.jsx("form",{action:"/web/account/portfolio",className:"text-sm w-full max-w-md",children:e.jsxs("div",{className:`flex items-center bg-gray-50 rounded-full pl-4 pr-1 py-1 gap-2
            border-[1px] border-gray-500`,children:[e.jsx("input",{name:"q",defaultValue:a,type:"text",placeholder:"Business name, address, country, state...",className:"flex-grow text-gray-700 text-[12px] outline-none bg-transparent"}),e.jsx("button",{className:"bg-gray-600 w-8 h-8 flex items-center justify-center rounded-full text-white text-lg",children:e.jsx(E,{})})]})}),T=({base_url:a,title:r,q:c})=>e.jsx("div",{children:e.jsxs("div",{className:`bg-gray-100 w-full  
                            flex place-content-between rounded-lg
                            place-items-center h-auto py-3 gap-[5px]
                            leading-[1.5em] px-[10px]`,children:[e.jsx("div",{className:"h-full min-w-[100px] w-[100px] max-w-[300px]",children:e.jsxs("div",{className:"flex items-center   ",children:[e.jsx(I,{className:"mr-1 flex-shrink-0",size:20}),e.jsx("span",{className:"line-clamp-1 overflow-hidden text-blue-800 text-[16px] font-sans tracking-tight font-bold",children:r})]})}),e.jsx("div",{className:"grow flex place-content-end",children:e.jsx(G,{query:c})})]})}),D=({children:a,businessGuid:r,data:c,businessProfile:m,title:x})=>e.jsx("div",{children:e.jsxs("div",{className:`mt-4 bg-white 
                rounded-lg shadow-md pb-8 `,children:[e.jsxs("div",{className:"font-semibold text-[17px] border-b-[1px] p-3 flex place-content-between place-items-center",children:[e.jsx("div",{children:x}),e.jsx("div",{className:"text-[13px] flex place-items-center gap-2",children:e.jsx("a",{href:"/web/account/portfolio",className:"border py-[5px] px-[10px] rounded-full bg-blue-50",children:"Portfolio Home"})})]}),e.jsxs("div",{className:"  pt-0 ",children:[e.jsx("div",{className:"w-full flex place-content-end"}),a,e.jsx("div",{className:"h-[40px]"})]})]})}),ee=()=>{l.useEffect(()=>{C(localStorage)},[]);const a=k();if(!a)return null;const{user:r}=a,[c,m]=l.useState(null),[x,i]=l.useState(null),[t,u]=l.useState(null),[s,b]=l.useState(!0),N=S(),h=new URLSearchParams(N.search),d=(h==null?void 0:h.get("q"))||"";return l.useEffect(()=>{async function j(f,v){const o=await B(f||""),p=await M(f||"",v||"");m(o),i(p)}try{r!=null&&r.guid&&j(r==null?void 0:r.guid,d)}catch(f){console.log(f.message)}},[r==null?void 0:r.guid,d]),l.useEffect(()=>{c&&x&&u({userProfile:c,portfolio:x})},[c,x]),l.useEffect(()=>{t!==null&&b(!1)},[t]),s?e.jsx(R,{loading:s}):e.jsx(_,{children:e.jsxs(D,{title:"My Portfolio",children:[c===null?"Loading...":"",e.jsx(T,{base_url:"/web/account/portfolio",title:`${A(t.portfolio.length)} Pages`,q:d}),e.jsx("div",{className:"flex place-items-center place-content-center mt-3"}),e.jsx("div",{className:"mt-[20px]"}),t!==null&&e.jsx(O,{user:t.userProfile,portfolio:t.portfolio})]})})};export{ee as default};
